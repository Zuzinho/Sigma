@model ValueTuple<List<Sigma.Models.Project>, Sigma.Models.User,List<Sigma.Models.Link>>
@{
    Layout = "";
}

<!DOCTYPE html>

<html>
<head>
    <title>Sigma</title>
    <link rel="stylesheet" href="~/Content/css/edit_user_page.css">
    <link href='https://fonts.googleapis.com/css?family=Noto Sans' rel='stylesheet'>
    <meta charset="utf-8">
</head>
<body>
    <div class="header">
        <div class="header__row">
            <div class="header__title">
                <a href="@Url.Action("Index","Home",new {page = 1})">
                    <div class="header__logo">
                        <span>σ</span>
                    </div>
                </a>
                <a href="@Url.Action("Index","Home",new {page = 1})">
                    <div class="header__info">
                        <div class="header__name">Sigma</div>
                        <div class="header__tagname">Where your portfolio starts</div>
                    </div>
                </a>
            </div>
            <div class="header__links">
                <a href="@Url.Action("MyPortfolio", "Home")" class="my_portfolio">My portfolio</a>
                <a href="@Url.Action("AboutPage","Home")" class="about">About</a>
            </div>
        </div>
    </div>
    <form asp-controller="Home" asp-action="EditUserPage" method="post">
        <div class="container">
            <div class="user_info__row">
                <div class="user_title">
                    <div class="input_image__row">
                        <div class="user_image">
                            <input type="file" name="UserAvatarUrl" class="image_input">
                            <img class="image" src="@Model.Item2.avatarUrl" alt="">
                        </div>
                    </div>
                    <div class="user_info">
                        <input value="@Model.Item2.Name" name="UserName" type="text" class="user_name">
                        <input type="text" value="@Model.Item2.position" name="User_position" class="user_position">
                    </div>
                </div>
                <div class="user_links">
                    @foreach (var link in Model.Item3)
                    {
                        string link_id = link.Id.ToString();
                        <div id="@link_id" class="user_link_border">
                            <image class="user_link_image" src="@link.provider_avatar" alt=""></image>
                            <div class="trash_border" onclick="deleteicon(@link_id)">
                                <image class="trash_link" src="/Content/img/icons/Trash.png"></image>
                            </div>
                        </div>
                    }
                    <div class="add_new_link__row">
                        <input type="text" name="UserUrl" class="add_new_link_text" placeholder="Add new...">
                        <image class="add_new_link_image" src="/Content/img/icons/Plus.png"></image>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="owner_info__row">
                <div class="row__title">Tell a bit about yourself</div>
                <div class="row__type">
                    <a href="#editorForm" class="editor-tabs__item">Editor</a>
                    <a href="#editorPreview" class="editor-tabs__item">Preview</a>
                </div>
                <textarea id="editorForm" placeholder="Write here your markdown"
                          class="markdown__text_input" name="UserAbout">@Model.Item2.about</textarea>
                <div id="editorPreview" class="editor-content__item"></div>
            </div>
        </div>
        <div class="container">
            <div class="search__project_text">Select your brightest projects</div>
            <div class="project__search">
                <input formmethod="get" id="ProjectSearch" class="project_selection__text" name="project_order" placeholder="Search for a project">
                <image class="magglass" src="/Content/img/icons/magnifying-glass.png"onclick="sendProjects()"></image>
            </div>
            <div class="see_all">Enter 'all projects' to see all projects</div>

            <div class="projects__row">
                @foreach (var project in Model.Item1)
                {
                    string project_id = "project" + project.Id.ToString();
                    if (Convert.ToBoolean(project.selected))
                    {
                <div id="@project_id" class="project__item project__item-active" onclick="ChangeActive(@project_id)">
                    <div class="item__image" style="background-image:url('@project.PhotoUrl')"></div>
                    <div class="item__name">@project.Title</div>
                </div>
                    }
                    else
                    {
                    <div id="@project_id" class="project__item" onclick="ChangeActive(@project_id)">
                        <div class="item__image" style="background-image:url('@project.PhotoUrl')"></div>
                        <div class="item__name">@project.Title</div>
                    </div>
                    }
                }
            </div>
        </div>
        <div class="container">
            <div class="all_projects">
                <button type="submit" onclick="sendProjects()">
                    Save changes
                </button>
            </div>
        </div>
    </form>
    <div class="footer">
        Sigma 2021
    </div>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="~/Content/js/markdown.js"></script>
    <script src="~/Content/js/deleteicon.js"></script>
    <script src="~/Content/js/ChangeActive.js"></script>
    <script src="~/Content/js/sendProjects.js"></script>
</body>
</html>